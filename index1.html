<!DOCTYPE html>
<html lang="en">
<head>
    <title>Live Code Preview</title>
    <style>
        body { font-family: sans-serif; margin: 20px; }
        textarea { width: 32%; height: 150px; margin-right: 1%; vertical-align: top; }
        #preview { width: 100%; height: 300px; margin-top: 20px; border: 1px solid #ccc; }
        button { margin-top: 10px; }
    </style>
</head>
<body>
    <textarea id="htmlCode" placeholder="Write HTML here"></textarea>
    <textarea id="cssCode" placeholder="Write CSS here"></textarea>
    <textarea id="jsCode" placeholder="Write JavaScript here"></textarea>
    <br>
    <button onclick="runCode()">Run</button>
    <iframe id="preview" sandbox="allow-scripts allow-modals allow-same-origin"></iframe>

    <script src="loader.js"></script>
    <script>
        function runCode() {
            const html = document.getElementById("htmlCode").value;
            const css = `<style>${document.getElementById("cssCode").value}</style>`;
            const js = `<script>
                try {
                    ${document.getElementById("jsCode").value}
                } catch(e) {
                    document.body.innerHTML += '<pre style="color:red;">' + e + '</pre>';
                }
            <\/script>`;
            const iframe = document.getElementById("preview");
            iframe.srcdoc = `<html><head>${css}</head><body>${html}${js}</body></html>`;
        }
    </script>
</body>
</html>
